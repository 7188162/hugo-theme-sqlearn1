<!-- Sidebar Navigation -->
<h3>{{ site.Data.messages.chapters.title | default "ğŸ“š ç« ä¸€è¦§" }}</h3>

{{- /* å…¨ç« ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–å¾—ã—ã¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«è¡¨ç¤º */ -}}
{{- $allChapters := slice -}}
{{- range $section := site.Sections -}}
    {{- if hasPrefix $section.Section "chapter" -}}
        {{- $allChapters = $allChapters | append $section -}}
    {{- end -}}
{{- end -}}
{{- $sortedChapters := sort $allChapters ".Params.weight" -}}

<ul class="chapter-list">
    {{- range $sortedChapters -}}
    <li class="chapter-item">
        <a href="{{ .Permalink }}" class="chapter-link {{ if eq $.Permalink .Permalink }}active{{ end }}">
            {{- .Title -}}
        </a>
        
        {{- if and (eq $.Permalink .Permalink) .TableOfContents -}}
        <!-- Show TOC for current page -->
        <div class="chapter-toc">
            {{ .TableOfContents }}
        </div>
        {{- end -}}
    </li>
    {{- end -}}
    
    {{- /* ä»˜éŒ²ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚‚è¿½åŠ  */ -}}
    {{- $appendixSection := site.GetPage "section" "appendix" -}}
    {{- if $appendixSection -}}
    <li class="chapter-item">
        <a href="{{ $appendixSection.Permalink }}" class="chapter-link {{ if eq $.Section "appendix" }}active{{ end }}">
            ğŸ“ {{ $appendixSection.Title | default "ä»˜éŒ²" }}
        </a>
    </li>
    {{- end -}}
</ul>

<!-- Progress Section -->
{{- if site.Params.showProgress -}}
<div class="sidebar-section">
    <h3>{{ site.Data.messages.progress.title | default "ğŸ“ˆ å­¦ç¿’é€²æ—" }}</h3>
    <div class="progress-info">
        <p class="progress-text">{{ site.Params.progressText | default "ç¬¬2ç« ã¾ã§å®Œäº†" }}</p>
        <div class="progress-bar">
            <div class="progress-fill" style="width: {{ site.Params.progressPercent | default "35" }}%;"></div>
        </div>
        <p class="progress-percentage">{{ site.Params.progressPercent | default "35" }}% {{ site.Data.messages.progress.completed_suffix | default "å®Œäº†" }}</p>
    </div>
</div>
{{- end -}}

<!-- Quick Links -->
{{- if site.Data.sidebar.quicklinks -}}
<div class="sidebar-section">
    <h3>ğŸ”— ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯</h3>
    <ul class="quick-links">
        {{- range site.Data.sidebar.quicklinks -}}
        <li><a href="{{ .url }}" {{ if .external }}target="_blank" rel="noopener"{{ end }}>{{ .name }}</a></li>
        {{- end -}}
    </ul>
</div>
{{- end -}}

<!-- RDBMS Support Info -->
<div class="sidebar-section">
    <h3>ğŸ’¾ å¯¾å¿œRDBMS</h3>
    <div class="rdbms-support">
        {{- range site.Data.sidebar.supported_rdbms -}}
        <div class="badge {{ .class }}">{{ .name }}</div>
        {{- end -}}
    </div>
</div>